<template>
    <div class="flex_container" id="total">
        <!-- <Title :text="chall_info.challengeName" /> -->
        <div class="stars-box">
            <img class="stars" src="../assets/manystar.png" alt="manystar" />
        </div>
        <div class="challengetitle">
            <div class="Ctitle"><Title v-bind:text="chall_info.challengeName" /></div>
        </div>

        <div class="d-flex row wider justify-content-center" id="body">
            <div class="joinbox">
                <li class="changebtn" v-if="!beforejoin">
                    <div class="Cjoin_btn"><ButtonRound :text="Í∞ÄÏûÖÌïòÍ∏∞" /></div>
                    <div class="alarm">
                        <h5 id="rest">{{ restTime }}</h5>
                    </div>
                </li>
                <!-- <li class="changebtn" v-   -if="afterjoin">
                    <div class="Cjoindone_btn"><ButtonRound :text="Í∞ÄÏûÖÏôÑÎ£å" /></div>
                    <div class="alarm">
                        <h5>ÏßÑÌñâ Ï§ë</h5>
                    </div>
                </li>
                <li class="changebtn" v-else>
                    <div class="Cjoindone_btn"><ButtonRound :text="Í∞ÄÏûÖÏôÑÎ£å" /></div>
                    <div class="alarm">
                        <h5 style="color: #EE4748">Ï¢ÖÎ£å</h5>
                    </div>
                </li> -->
                <!-- <div class="alarm">
                    <h4> Í∞ÄÏûÖ ÎßàÍ∞êÍπåÏßÄ 20 : 56 </h4>
                </div> -->
            </div>

            <div class="col col-4 flex-item">
                <div class="outline">
                    <div class="outline2">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th scope="col"></th>
                                    <th scope="col">Í≥ºÏ†ú1</th>
                                    <th scope="col">Í≥ºÏ†ú2</th>
                                    <th scope="col">Í≥ºÏ†ú3</th>
                                    <th scope="col">Í≥ºÏ†ú4</th>
                                    <th scope="col">Í≥ºÏ†ú5</th>
                                    <th scope="col">Í≥ºÏ†ú6</th>
                                    <th scope="col">Í≥ºÏ†ú7</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <th scope="row" style="background-color: #b7beda">Í∂åÌù¨ÏùÄ</th>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <th scope="row" style="background-color: #b7beda">ÍπÄÌÉúÌòÑ</th>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <th scope="row" style="background-color: #b7beda">ÍπÄÏ§ÄÌòï</th>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <th scope="row" style="background-color: #b7beda">Ïù¥Ïû•ÏÑ≠</th>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <th scope="row" style="background-color: #b7beda">Ïú†Ìù¨Ïõê</th>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <th scope="row" style="background-color: #b7beda">Ï∞®ÏùÄÏ±Ñ</th>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <th scope="row" style="background-color: #b7beda">ÍπÄÏã∏Ìîº</th>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <th scope="row" style="background-color: #b7beda">ÍπÄÏã∏Ìîº</th>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <th scope="row" style="background-color: #b7beda">ÍπÄÏã∏Ìîº</th>
                                    <td></td>
                                    <td></td>
                                    <td>
                                        <router-link to="/PostDetailAfter"><div class="after"/></router-link>
                                    </td>
                                    <td></td>
                                    <td>
                                        <router-link to="/PostDetailAfter"><div class="after"/></router-link>
                                    </td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <th scope="row" style="background-color: #b7beda">ÍπÄÏã∏Ìîº</th>
                                    <td>
                                        <router-link to="/PostDetailAfter"><div class="after"/></router-link>
                                    </td>
                                    <td>
                                        <router-link to="/PostDetail"><div class="before"/></router-link>
                                    </td>
                                    <td>
                                        <router-link to="/PostDetailAfter"><div class="after"/></router-link>
                                    </td>
                                    <td><div class="fail"></div></td>
                                    <td></td>
                                    <td>
                                        <router-link to="/PostDetailAfter"><div class="after"/></router-link>
                                    </td>
                                    <td>
                                        <router-link to="/PostDetail"><div class="before"/></router-link>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="col col-5 flex-item">
                <div class="ChallengeDetail">
                    <div class="Cdetail">
                        <h4>üî• ÏÇºÏÑ± ÏΩîÌÖå Í∏∞Ï∂ú ÏïåÍ≥† 4ÏãúÍ∞Ñ Î∞ïÏÇ¥ üî•</h4>
                        <br />
                        Ï†ÄÌù¨ Ïä§ÌÑ∞ÎîîÎäî 1Ïùº 1ÏïåÍ≥†Î¶¨Ï¶òÏúºÎ°ú ÎÑ§Ïπ¥ÎùºÏø†Î∞∞Î•º Í∞à ÏÇ¨ÎûåÎì§ ÏûÖÎãàÎã§!<br />
                        ÏùºÏ£ºÏùºÎèôÏïà Î∞±Ï§Ä Ï¥ù 7Î¨∏Ï†úÎ•º ÌíÄ Í≤ÉÏûÖÎãàÎã§.<br />
                        Í≥ºÏ†ú 1 : BJ 3049<br />
                        Í≥ºÏ†ú 2 : BJ 8490<br />
                        Í≥ºÏ†ú 3 : BJ 908<br />
                        Í≥ºÏ†ú 4 : BJ 193<br />
                        Í≥ºÏ†ú 5 : BJ 9830<br />
                        Í≥ºÏ†ú 6 : BJ 1394<br />
                        Í≥ºÏ†ú 7 : BJ 9033<br />
                        <br />
                        <strong>Ï∞∏Ïó¨Î©§Î≤Ñ : @Í∂åÌù¨ÏùÄ @ÍπÄÏ§ÄÌòï @ÍπÄÌÉúÌòÑ @Ïù¥Ïû•ÏÑ≠ @Ïú†Ìù¨Ïõê @Ï∞®ÏùÄÏ±Ñ</strong>
                    </div>
                </div>
                <div class="ChallengeTicket">
                    <img class="ticketbody" src="../assets/ticketbody.png" alt="ticketbody" />
                </div>
            </div>
        </div>
        <!-- <insert-modal v-on:call-parent-insert="closeAfterInsert"></insert-modal> -->
        <!-- <detail-modal v-on:call-parent-change-to-delete="changeToDelete"></detail-modal> -->
    </div>
</template>
<script>
import Title from '@/components/common/Title.vue';
import ButtonRound from '@/components/common/ButtonRound.vue';
// import Difficulty from '@/components/common/Difficulty'
// import PostDetailModal from '@/components/PostDetailModal'
import '@/components/css/ChallengeRoom.css';
import axios from '@/util/http-common.js';

// import InsertModal from '@/components/modals/InsertModal.vue'
// import DetailModal from '@/components/modals/DetailModal.vue';
// import router from '../router/index.js'

// import { Modal } from 'bootstrap';

// import Vue from 'vue';
// import VueAlertify from 'vue-alertify';
// Vue.use(VueAlertify);

export default {
    name: 'ChallengeRoom',
    components: {
        Title, // ÌÉÄÏù¥ÌãÄ Í∞ÄÏ†∏Ïò§Í∏∞
        ButtonRound, // Îë•Í∑º Î≤ÑÌäº Í∞ÄÏ†∏Ïò§Í∏∞
        // Difficulty      // ÎÇúÏù¥ÎèÑ Í∞ÄÏ†∏Ïò§Í∏∞
        //PostDetailModal,
        //InsertModal, // ÏûëÏÑ±ÏûêÍ∞Ä Ï≤òÏùå Í≥ºÏ†úÎ•º Ï†úÏ∂úÌïòÎäî Î™®Îã¨
        //DetailModal, // ÏûëÏÑ± ÌõÑ Î≥¥Ïó¨ÏßÄÎäî Î™®Îã¨
    },
    data: function() {
        return {
            // Î≤ÑÌäºÏóê Îì§Ïñ¥Í∞à Î¨∏Íµ¨Îì§
            Í∞ÄÏûÖÌïòÍ∏∞: 'Í∞ÄÏûÖÌïòÍ∏∞',
            Í∞ÄÏûÖÏôÑÎ£å: 'Í∞ÄÏûÖÏôÑÎ£å',
            // Ï±åÎ¶∞ÏßÄ: 'ÌûàÏò§ÎãàÏùò ÏïåÍ≥† Ï±åÎ¶∞ÏßÄ',
            challengeno: 1,
            chall_info: {
                challengeCapacity: 6,
                challengeCategory: 'Algo',
                challengeDesc: 'ÏïåÍ≥† Ï±åÎ¶∞ÏßÄÏù¥Îã§\nÏïÑÏù¥ÏïÑÏù¥\nÎ∞±Ï§ÄÌíÄÏûê',
                challengeEnddate: 'string',
                challengeGroup: [['string']],
                challengeLevel: 0,
                challengeName: 'what!!!',
                challengeNo: 0,
                challengeStartdate: '2021-08-19 23:59:59',
                challengeTaskCnt: 0,
                challengeTaskdeadlines: ['string'],
            },

            // Î™®Îã¨
            // insertModal : null,
            // detailModal : null
        };
    },
    methods: {
        // // insert
        // showInsertModal(){
        // this.insertModal.show();
        // },

        // closeAfterInsert(){
        // this.insertModal.hide();
        // },
        getChallInfo: function() {
            axios({
                methods: 'get',
                url: `/challenge/info/${this.challengeno}`,
            })
                .then((res) => {
                    this.chall_info = res.data;
                })
                .catch((err) => {
                    console.log(err);
                });
        },
        countDownTimer: function(id) {
            var date = this.chall_info.challengeStartdate;
            //const countDownTimer = function (id) {
            var _vDate = new Date(date); // Ï†ÑÎã¨ Î∞õÏùÄ ÏùºÏûê
            var _second = 1000;
            var _minute = _second * 60;
            var _hour = _minute * 60;
            var _day = _hour * 24;
            var timer;
            function showRemaining() {
                var now = new Date();
                var distDt = _vDate - now - 1;
                if (distDt < 0) {
                    clearInterval(timer);
                    document.getElementById(id).textContent = 'Î™®ÏßëÏù¥ Ï¢ÖÎ£å ÎêòÏóàÏäµÎãàÎã§!';
                    return;
                }
                var days = Math.floor(distDt / _day);
                var hours = Math.floor((distDt % _day) / _hour);
                var minutes = Math.floor((distDt % _hour) / _minute);
                var seconds = Math.floor((distDt % _minute) / _second);
                //document.getElementById(id).textContent = date.toLocaleString() + "ÍπåÏßÄ : ";
                document.getElementById(id).textContent = 'ÎßàÍ∞êÍπåÏßÄ ' + days + 'Ïùº ';
                document.getElementById(id).textContent += hours + 'ÏãúÍ∞Ñ ';
                document.getElementById(id).textContent += minutes + 'Î∂Ñ ';
                document.getElementById(id).textContent += seconds + 'Ï¥à';
            }
            timer = setInterval(showRemaining, 1000);
        },
    },
    created: function() {
        this.getChallInfo(); //ÏÉùÏÑ±Ìï† Îïå Î∞îÎ°ú Î∂àÎü¨Ï§ò
        this.countDownTimer('rest', this.chall_info.challengeStartdate);
    },
};
</script>
<style scoped>
/* Í∞ÄÏûÖÌïòÍ∏∞ Î≤ÑÌäº */
.Cjoin_btn .btn-light {
    color: #1f4256;
    background-color: #99b7ff;
    border-color: #99b7ff;
    font-size: 25px;
    font-weight: bold;
    width: 171px;
    height: 54px;
    margin-right: 69%;
    margin-bottom: 5px;
}

/* Í∞ÄÏûÖÏôÑÎ£å Î≤ÑÌäº */
.Cjoindone_btn .btn-light {
    color: #1f4256;
    background-color: #f9d479;
    border-color: #f9d479;
    font-size: 25px;
    font-weight: bold;
    width: 171px;
    height: 54px;
    margin-right: 69%;
    margin-bottom: 5px;
}

.alarm {
    color: #e92828;
    margin-left: 10px;
    margin-top: 20px;
}

/* .joinbox{
    justify-content: center;
} */

.changebtn {
    display: flex;
    justify-content: left;
    padding-top: 20px;
    border-style: none;
    margin-left: 210px;
}

/* .check{
    background-color: #f9d479;
    width: 40px;
    height: 40px;
    border-radius: 100%;
} */

.table > :not(caption) > * > * {
    padding: 0 0;
}

/* Í≥ºÏ†ú Ï†úÏ∂ú Ï†Ñ Ïπ∏ */
.before {
    background-color: #f9d479;
    width: 100%;
    height: 100%;
}

/* Í≥ºÏ†ú Ï†úÏ∂ú ÌõÑ ÌååÎûÄÏÉâÏúºÎ°ú Î≥ÄÌï® */
.after {
    background-color: #1f4256;
    width: 100%;
    height: 100%;
}

/* Í≥ºÏ†ú Ï†úÏ∂ú ÏïàÌïòÎ©¥ Îπ®Í∞ÑÏÉâÏúºÎ°ú Î≥ÄÌï® */
.fail {
    background-color: #ee4748;
    width: 100%;
    height: 100%;
}

th {
    width: 100px;
}
</style>
